En el caso que en algún momento se ejecute solo la primer línea del ciclo y se cambie de contexto y se ejecute la primer línea del ciclo del otro proceso se va a producir un Deadlock, porque `foo` se va a quedar atascado esperando al semaforo `R` que acaba de consumir `bar` y `bar` va a quedar atascado esperando al semaforo `S` que acaba de consumir `foo`.